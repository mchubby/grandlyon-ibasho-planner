{"name":"Grandlyon-ibasho-planner - A PHP+Silex+MongoDB+Leaflet/OpenStreetMap website","tagline":"A variation on the https://github.com/openshift-quickstart/silex-mongodb-parks example.","body":"## Project Rationale\r\nThis project is a fork from [openshift-quickstart/silex-mongodb-parks](/openshift-quickstart/silex-mongodb-parks). It intends to try implementing several features on top of the existing AJAX-based OpenStreetMap slippy map.\r\n\r\n\r\n**Namely:**\r\n\r\n☑ Only populates MongoDB on first deployment\r\n\r\n☑ Nice, customizable markers with [lvoogdt/Leaflet.awesome-markers](https://github.com/lvoogdt/Leaflet.awesome-markers) and the awesome [fortawesome/Font-Awesome](https://github.com/fortawesome/Font-Awesome)\r\n\r\n☐ Marker insertion using [aratcliffe/Leaflet.contextmenu](https://github.com/aratcliffe/Leaflet.contextmenu)\r\n\r\n☐ Better tweaked for more Heroku deployment friendliness\r\n\r\n---\r\n\r\n### Deploying to **Openshift** using the `rhc` gem in CLI\r\n```\r\n$ rhc app create tclmap php-5.4 mongodb-2 --from-code=https://github.com/mchubby/grandlyon-ibasho-planner\r\n```\r\n\r\n### Deploying to RedHat **Openshift** through the web interface\r\nVisit <https://openshift.redhat.com/app/console/application_type/custom?cartridges%5B%5D=php-5.4&cartridges%5B%5D=mongodb-2&name=tclmap&initial_git_url=https%3A%2F%2Fgithub.com%2Fmchubby%2Fgrandlyon-ibasho-planner.git>\r\n\r\n---\r\n\r\n### Deploying to **Heroku** (work in progress)\r\n#### Add ext-mongo to composer.json\r\n```\r\n{\r\n    \"require\": {\r\n        \"ext-mongo\": \"*\",\r\n        \"silex/silex\": \"~1.1\"\r\n    }\r\n}\r\n```\r\n\r\n#### Create Procfile at project root\r\n``` \r\n web: vendor/bin/heroku-php-nginx -C nginx_heroku.conf\r\n \r\n```\r\n\r\n#### Create nginx_heroku.conf at project root\r\n```\r\n\r\nlocation ~ ^(/(?:css|js|vendor).*)$ {\r\n    try_files /static$1 @parksrewrite;\r\n}\r\n\r\nlocation @parksrewrite {\r\n    # rewrite all to app.php\r\n    rewrite ^(.*)$ /app.php/$1 last;\r\n}\r\n\r\nlocation / {\r\n    # rewrite all to app.php\r\n    rewrite ^(.*)$ /app.php/$1 last;\r\n}\r\n\r\nlocation ~ ^/(app|app_dev|config)\\.php(/|$) {\r\n    fastcgi_pass heroku-fcgi;\r\n    fastcgi_split_path_info ^(.+\\.php)(/.*)$;\r\n    include fastcgi_params;\r\n    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\r\n    fastcgi_param HTTPS off;\r\n}\r\n```\r\n\r\n#### Create app in Heroku with php-5 and any Mongo addon\r\nYou may do this either with the web frontend or the `heroku` toolbelt.\r\n\r\n#### Import `tcl_metro_line_a.json` to your MongDB provider using CLI:\r\n```\r\n$ mongoimport --db mongolab_dbname_here --collection tcl_metro_a --host mongolab_dbhost_here --port mongolab_dbport_here --username mongolab_username_here --password mongolab_password_here --type json --file tcl_metro_line_a.json\r\n```\r\n- tweak all .php's for MongoDB connection strings / database / collections\r\n\r\n##### Deploy to Heroku in toolbelt:\r\n```\r\n$ git clone git@heroku.com:heroku_app_name.git -o heroku && cd heroku_app_name\r\n$ git remote add upstream -m master https://github.com/mchubby/grandlyon-ibasho-planner.git\r\n$ git pull -s recursive -X theirs upstream master\r\n\r\n(overwrite with your own changed files)\r\n$ git add .\r\n$ git commit -m \"Initial commit before deploying\"\r\n\r\n$ git push heroku master\r\n```\r\n\r\n#### Profit!\r\nFinally you can visit `heroku_app_name`.herokuapp.com/ in your browser and (hopefully) enjoy!\r\n\r\nMany thanks to @ryanj for his great example!\r\n\r\n \r\n\r\n \r\n\r\n \r\n\r\n \r\n\r\n## Note: Original README follows\r\n \r\n\r\n\r\n---\r\n\r\n\r\n# Map of US National Parks\r\n*powered by Silex, PHP, MongoDB, and Leaflet maps*\r\n\r\nTo deploy a clone of this application using the [`rhc` command line tool](http://rubygems.org/gems/rhc):\r\n\r\n    rhc app create parks php-5.4 mongodb-2 --from-code=https://github.com/openshift-quickstart/silex-mongodb-parks.git\r\n    \r\nOr [link to a web-based clone+deploy](https://openshift.redhat.com/app/console/application_type/custom?cartridges%5B%5D=php-5.4&cartridges%5B%5D=mongodb-2&initial_git_url=https%3A%2F%2Fgithub.com%2Fopenshift-quickstart%2Fsilex-mongodb-parks.git) on [OpenShift Online](http://OpenShift.com) or on [your own OpenShift cloud](http://openshift.github.io): \r\n\r\n    https://openshift.redhat.com/app/console/application_type/custom?cartridges%5B%5D=php-5.4&cartridges%5B%5D=mongodb-2&initial_git_url=https%3A%2F%2Fgithub.com%2Fopenshift-quickstart%2Fsilex-mongodb-parks.git\r\n\r\nA demo is available at: [http://phparks-shifter.rhcloud.com/](http://phparks-shifter.rhcloud.com/)\r\n\r\n## License\r\nThis code is dedicated to the public domain to the maximum extent permitted by applicable law, pursuant to CC0 (http://creativecommons.org/publicdomain/zero/1.0/)\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}